у каждого протокола своя метрика, он самостоятельно пересчитывает стоимость каждой дистанции и выдает стоимость каждого маршрута


сети могут быть:
  Серые:
    они же локальные/приватные/внутренние и не маршрутизируются в Internet
    диапазоны серых сетей описаны [RFC 1918](https://tools.ietf.org/html/rfc1918)
    10.0.0.0/8
    172.16.0.0/12
    192.168.0.0/16
  Сети специального назначения:
    Диапазоны описаны RFC [6890](https://tools.ietf.org/html/rfc6890)
    0.0.0.0/8 - хост как источник
    127.0.0.0/8 - loopback
    нотация(заменила классы сетей) и маски переменной длины
    100.64.0.0/10 - NAT, для провайдеров
    169.254.0.0/16 - Link Local(в ipv4 выделяемые адреса, если мы не смогли получить адрес по dhcp, используя механизмы zero_conf, linux or pip )
    224.0.0.0/4 - Multicast
  Реальные IP адреса
    внешний/прямой/белый
    работает в рамках автономной системы(AS)
      AS - сети находящиеся под единым административным управлением. У провайдеров AS, если он не из последней мили - "дочка" провайдера
    выдается вместе с номером AS RIR'ом(RIPE NCC)
    87.250.250.0/24
    8.8.8.0/24

Агрегированные сети:
  сети включиющие в себя более специфичные сети
  Правило самого длинного префикса - предпочтение в маршрутизации отдается маршруту с большей маской.
  default маршрут для адресов не входящих в др, маршруты, самый большой агрегат
  особенночти использования:
    решение: null routing
      ip ro add blackhole 172.168.0.0/23 - все адреса  этой сети станут недоступны(физ смысл /dev/null)
      ip ro add 172.16.1.0/24 via 192.168.0.1 - по правилу максимально префикса(маски сети) адреса этой сети станут доступны несмотря на предыдущий blackhole из-за большего префикса(маски)
    это дает возможности:
        ограничивать трафик на несуществующие сети
        устранять петли маршрутизации, разорвать петлю на определенном хосте
        настраивать "дешевый" способ фильтрации трафика
    кейс:
      Есть сервер с vpn, через который есть доступ до рабочего места, при падении vpn-сервера, трафик может отмаршрутизироваться по другом маршруту в другое место, для этого нужно прописать больший диапазон в blackhole, а нужный specific маршрут на vpn, тогда в случае падения vpn, трафик не уйдет

loopback:
  Драйвер виртуальной сетевой карты, виртуальный/петлевой интерфейс,
  ip addr add 10.10.2.2 dev lo # добавление адреса на loopback

multicast:
  зарезервированные multicast [link](https://www.iana.org/assignments/multicast-addresses/multicast-addresses.xml)
  Чтобы принимать сообщения multicast необходимо состоять в определенной группе, чтобы отправлять необязательно.
  Multicast адреса делятся на маршрутизируемые и нет(только в пределах локальной сети), показатель маршрутизируемусти это 3-ий октет
    ttl=1(local in scope)
      224.0.0.0-224.0.0.255
        224.0.0.1   all systems in this subnet
        224.0.0.2   all routers in this subnet
        224.0.0.5   OSPF Routers
        224.0.0.13  PIMv2 Routers
        224.0.0.22  IGMPv3
    ttl>1(no local in scope)
      224.0.1.0-224.0.1.255
        224.0.1.1   NTP(Network Time Protocol)
        224.0.1.32  Mtrace routers
        224.0.1.78   Tibco Multicast1

+/- статической маршрутизации
  +:
    быстро и просто развернуть в небольшой сети
    легко устранить неполадки
    нет обмена сообщениями между маршрутизаторами
    безопасность
    не требует вычислительных ресурсов

  -
    сложность конфигурации в больших сетях(прямая зависимость от роста сети)

+/- динамической маршрутизации
  +:
    автоматическое построение топологии и таблиц маршрутизации
    отказоустойчивость
    балансировка управлением трафика
    простота масштабирования сети
  -:
    сложность реализации
    менее безопасна
    зависимость маршрута от топологии сети
    протоколы более требовательны к производительности оборудования и каналам

Динамическая маршрутизация
  Протоколы делятся на используемые внутри AS(IGP) и между AS(EGP)
  IGP(interior gateway protocol)
    - Дистанционно-векторные протоколы("слепые") - строят мини-карту сети включающую соседей, и известные соседям сети и цену до адресатов, выбирая лучшие инсталирует их в табл маршрутизации
        "дистанция" показывает расстояние до точки назначения
        дальность оперирует такой показатель как "метрика"
        "вектор" показывает направление до точки назначения
        вектором может быть выходной интерфейс, IP адрес соседа
      протоколы: RIP, EIGRP

    - Link-state протоколы - обмениваются информацией, и строят огромную таблицу сети, можно сказать граф, где вершины роутеры, ребра каналы связи. Назначают строимость интерфейсов, от состояния интерфейса(учитывают 100/1000 Mbit/s канал)
        link - интерфейс маршрутизатора
        state - его состояние и как он подключен к соседям
      протоколы: OSPF,ISIS

  EGP(exterior gateway protocol)
    векторно направленный протокол:
      протокол:BGP






info:
192.168.1.1/32 - один адрес, весь трафик идет на один адрес, без broadcast

+info:
EIGRP
ISIS
Quagga,FRR,BIRD
Carrier-grade NAT
Диапазоны сетей описаны в RFC 1918: [RFC 1918](https://tools.ietf.org/html/rfc1918)
